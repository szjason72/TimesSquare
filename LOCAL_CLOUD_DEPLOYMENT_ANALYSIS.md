# æœ¬åœ°äº‘éƒ¨ç½²æ–¹æ¡ˆåˆ†æž

## ðŸ“‹ é¡¹ç›®åˆ†æž

**å‚è€ƒé¡¹ç›®**: btcloud-mainï¼ˆå®å¡”é¢æ¿ç¬¬ä¸‰æ–¹äº‘ç«¯ï¼‰  
**ç›®æ ‡**: ä¸ºGoZervi SaaSç³»ç»Ÿå®žçŽ°çœŸæ­£çš„æœ¬åœ°äº‘éƒ¨ç½²èƒ½åŠ›  
**åˆ†æžæ—¶é—´**: 2025-01-XX

---

## ðŸ” btcloud-main æ ¸å¿ƒç‰¹æ€§åˆ†æž

### 1. ç§æœ‰åŒ–éƒ¨ç½²æž¶æž„

#### æ ¸å¿ƒç‰¹ç‚¹
- âœ… **å®Œå…¨ç¦»çº¿**: ä¸ä¸Žå®˜æ–¹æŽ¥å£é€šä¿¡
- âœ… **æœ¬åœ°èµ„æº**: è‡ªå¸¦æ‰€æœ‰å®‰è£…åŒ…å’Œæ›´æ–°åŒ…
- âœ… **ä¸€é”®å®‰è£…**: æä¾›è‡ªåŠ¨åŒ–å®‰è£…è„šæœ¬
- âœ… **æ‰¹é‡æ›¿æ¢**: å·¥å…·åŒ–é…ç½®æ›¿æ¢
- âœ… **å®šæ—¶åŒæ­¥**: å¯é€‰çš„å¢žé‡æ›´æ–°æœºåˆ¶

#### å®žçŽ°æ–¹å¼
```
1. æœ¬åœ°èµ„æºç®¡ç†
   â”œâ”€â”€ å®‰è£…åŒ…å­˜å‚¨ï¼ˆdata/plugins/ï¼‰
   â”œâ”€â”€ æ›´æ–°åŒ…å­˜å‚¨ï¼ˆdata/plugins/package/ï¼‰
   â””â”€â”€ é…ç½®æ–‡ä»¶ï¼ˆdata/config/ï¼‰

2. å®‰è£…è„šæœ¬
   â”œâ”€â”€ install_panel.shï¼ˆLinuxï¼‰
   â”œâ”€â”€ install_7.0_en.shï¼ˆè‹±æ–‡ç‰ˆï¼‰
   â””â”€â”€ panel_update.pyï¼ˆWindowsï¼‰

3. æ‰¹é‡æ›¿æ¢å·¥å…·
   â””â”€â”€ æ›¿æ¢å®‰è£…åŒ…ä¸­çš„äº‘ç«¯åœ°å€

4. å®šæ—¶ä»»åŠ¡
   â””â”€â”€ å¢žé‡åŒæ­¥å®˜æ–¹æ›´æ–°
```

---

### 2. æœ¬åœ°äº‘æœåŠ¡æž¶æž„

#### å…³é”®ç»„ä»¶
1. **èµ„æºç®¡ç†**: æœ¬åœ°å­˜å‚¨æ‰€æœ‰ä¾èµ–èµ„æº
2. **å®‰è£…è„šæœ¬**: è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹
3. **é…ç½®ç®¡ç†**: æœ¬åœ°åŒ–é…ç½®æ›¿æ¢
4. **æ›´æ–°æœºåˆ¶**: æœ¬åœ°æ›´æ–°åŒ…ç®¡ç†

---

## ðŸŽ¯ GoZerviæœ¬åœ°äº‘éƒ¨ç½²æ–¹æ¡ˆ

### æ–¹æ¡ˆè®¾è®¡åŽŸåˆ™

1. **å®Œå…¨ç¦»çº¿**: ä¸ä¾èµ–å¤–éƒ¨æœåŠ¡
2. **ä¸€é”®éƒ¨ç½²**: è‡ªåŠ¨åŒ–å®‰è£…æµç¨‹
3. **èµ„æºæœ¬åœ°åŒ–**: æ‰€æœ‰ä¾èµ–æœ¬åœ°å­˜å‚¨
4. **å¯æ‰©å±•æ€§**: æ”¯æŒå¤šçŽ¯å¢ƒéƒ¨ç½²

---

### æž¶æž„è®¾è®¡

```
GoZerviæœ¬åœ°äº‘éƒ¨ç½²æž¶æž„
â”œâ”€â”€ 1. èµ„æºå±‚ï¼ˆLocal Resourcesï¼‰
â”‚   â”œâ”€â”€ Dockeré•œåƒï¼ˆæœ¬åœ°ä»“åº“ï¼‰
â”‚   â”œâ”€â”€ æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ é…ç½®æ–‡ä»¶æ¨¡æ¿
â”‚   â””â”€â”€ ä¾èµ–åŒ…ç¼“å­˜
â”‚
â”œâ”€â”€ 2. éƒ¨ç½²å±‚ï¼ˆDeploymentï¼‰
â”‚   â”œâ”€â”€ docker-compose.ymlï¼ˆå®Œæ•´æœåŠ¡ç¼–æŽ’ï¼‰
â”‚   â”œâ”€â”€ ä¸€é”®å®‰è£…è„šæœ¬ï¼ˆinstall.shï¼‰
â”‚   â”œâ”€â”€ çŽ¯å¢ƒé…ç½®è„šæœ¬ï¼ˆsetup-env.shï¼‰
â”‚   â””â”€â”€ å¥åº·æ£€æŸ¥è„šæœ¬ï¼ˆhealth-check.shï¼‰
â”‚
â”œâ”€â”€ 3. æœåŠ¡å±‚ï¼ˆServicesï¼‰
â”‚   â”œâ”€â”€ PostgreSQLï¼ˆæ•°æ®åº“ï¼‰
â”‚   â”œâ”€â”€ Redisï¼ˆç¼“å­˜ï¼‰
â”‚   â”œâ”€â”€ Consulï¼ˆæœåŠ¡å‘çŽ°ï¼‰
â”‚   â”œâ”€â”€ API Gatewayï¼ˆç½‘å…³ï¼‰
â”‚   â”œâ”€â”€ Auth Serviceï¼ˆè®¤è¯ï¼‰
â”‚   â”œâ”€â”€ Tenant Serviceï¼ˆç§Ÿæˆ·ï¼‰
â”‚   â””â”€â”€ Business Servicesï¼ˆä¸šåŠ¡æœåŠ¡ï¼‰
â”‚
â””â”€â”€ 4. ç®¡ç†å±‚ï¼ˆManagementï¼‰
    â”œâ”€â”€ ç›‘æŽ§é¢æ¿ï¼ˆPrometheus + Grafanaï¼‰
    â”œâ”€â”€ æ—¥å¿—èšåˆï¼ˆELK/Lokiï¼‰
    â””â”€â”€ å¤‡ä»½æ¢å¤å·¥å…·
```

---

## ðŸ“¦ å®žæ–½è®¡åˆ’

### Phase 1: èµ„æºæœ¬åœ°åŒ–ï¼ˆWeek 1-2ï¼‰

#### 1.1 Dockeré•œåƒæœ¬åœ°åŒ–
- [ ] åˆ›å»ºæœ¬åœ°Dockeré•œåƒä»“åº“
- [ ] æž„å»ºæ‰€æœ‰æœåŠ¡çš„Dockeré•œåƒ
- [ ] å¯¼å‡ºé•œåƒä¸ºtaræ–‡ä»¶
- [ ] æä¾›é•œåƒå¯¼å…¥è„šæœ¬

#### 1.2 æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
- [ ] æ•´ç†æ‰€æœ‰æ•°æ®åº“è¿ç§»è„šæœ¬
- [ ] åˆ›å»ºåˆå§‹åŒ–SQLè„šæœ¬
- [ ] æä¾›æ•°æ®å¤‡ä»½/æ¢å¤å·¥å…·

#### 1.3 é…ç½®æ–‡ä»¶æ¨¡æ¿
- [ ] åˆ›å»ºçŽ¯å¢ƒé…ç½®æ¨¡æ¿
- [ ] æä¾›é…ç½®ç”Ÿæˆå·¥å…·
- [ ] æ”¯æŒå¤šçŽ¯å¢ƒé…ç½®ï¼ˆdev/staging/prodï¼‰

---

### Phase 2: éƒ¨ç½²è„šæœ¬å¼€å‘ï¼ˆWeek 2-3ï¼‰

#### 2.1 ä¸€é”®å®‰è£…è„šæœ¬
```bash
install.sh
â”œâ”€â”€ çŽ¯å¢ƒæ£€æŸ¥
â”œâ”€â”€ ä¾èµ–å®‰è£…ï¼ˆDocker, Docker Composeï¼‰
â”œâ”€â”€ é•œåƒå¯¼å…¥
â”œâ”€â”€ é…ç½®ç”Ÿæˆ
â”œâ”€â”€ æ•°æ®åº“åˆå§‹åŒ–
â””â”€â”€ æœåŠ¡å¯åŠ¨
```

#### 2.2 Docker Composeç¼–æŽ’
```yaml
docker-compose.yml
â”œâ”€â”€ PostgreSQL
â”œâ”€â”€ Redis
â”œâ”€â”€ Consul
â”œâ”€â”€ API Gateway
â”œâ”€â”€ Auth Service
â”œâ”€â”€ Tenant Service
â””â”€â”€ Business Services
```

#### 2.3 å¥åº·æ£€æŸ¥è„šæœ¬
- [ ] æœåŠ¡å¥åº·æ£€æŸ¥
- [ ] æ•°æ®åº“è¿žæŽ¥æ£€æŸ¥
- [ ] APIå¯ç”¨æ€§æ£€æŸ¥
- [ ] è‡ªåŠ¨ä¿®å¤æœºåˆ¶

---

### Phase 3: ç®¡ç†å·¥å…·å¼€å‘ï¼ˆWeek 3-4ï¼‰

#### 3.1 ç›‘æŽ§é¢æ¿
- [ ] Prometheusé…ç½®
- [ ] Grafanaä»ªè¡¨æ¿
- [ ] å‘Šè­¦è§„åˆ™é…ç½®

#### 3.2 æ—¥å¿—ç®¡ç†
- [ ] æ—¥å¿—èšåˆé…ç½®
- [ ] æ—¥å¿—æŸ¥è¯¢å·¥å…·
- [ ] æ—¥å¿—æ¸…ç†ç­–ç•¥

#### 3.3 å¤‡ä»½æ¢å¤
- [ ] æ•°æ®åº“å¤‡ä»½è„šæœ¬
- [ ] é…ç½®æ–‡ä»¶å¤‡ä»½
- [ ] ä¸€é”®æ¢å¤å·¥å…·

---

## ðŸ”§ æŠ€æœ¯å®žçŽ°

### 1. Docker Composeå®Œæ•´ç¼–æŽ’

#### æœåŠ¡åˆ—è¡¨
```yaml
services:
  # åŸºç¡€è®¾æ–½
  postgresql:
    image: postgres:14
    volumes:
      - ./data/postgres:/var/lib/postgresql/data
      - ./databases/postgres/init:/docker-entrypoint-initdb.d
    environment:
      POSTGRES_DB: zervigo_mvp
      POSTGRES_USER: zervigo
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
  
  redis:
    image: redis:7-alpine
    volumes:
      - ./data/redis:/data
  
  consul:
    image: consul:1.16
    volumes:
      - ./data/consul:/consul/data
  
  # æ ¸å¿ƒæœåŠ¡
  api-gateway:
    build: ./services/gateway
    depends_on:
      - consul
      - auth-service
  
  auth-service:
    build: ./services/core/auth
    depends_on:
      - postgresql
  
  tenant-service:
    build: ./services/core/tenant
    depends_on:
      - postgresql
      - auth-service
  
  # ä¸šåŠ¡æœåŠ¡
  job-service:
    build: ./services/business/job
    depends_on:
      - postgresql
      - auth-service
  
  company-service:
    build: ./services/business/company
    depends_on:
      - postgresql
      - auth-service
```

---

### 2. ä¸€é”®å®‰è£…è„šæœ¬

#### install.shåŠŸèƒ½
```bash
#!/bin/bash
# GoZerviæœ¬åœ°äº‘ä¸€é”®å®‰è£…è„šæœ¬

set -e

# 1. çŽ¯å¢ƒæ£€æŸ¥
check_environment() {
    echo "æ£€æŸ¥çŽ¯å¢ƒ..."
    # æ£€æŸ¥Docker
    # æ£€æŸ¥Docker Compose
    # æ£€æŸ¥ç³»ç»Ÿèµ„æº
}

# 2. å¯¼å…¥é•œåƒ
import_images() {
    echo "å¯¼å…¥Dockeré•œåƒ..."
    # ä»Žæœ¬åœ°taræ–‡ä»¶å¯¼å…¥é•œåƒ
}

# 3. ç”Ÿæˆé…ç½®
generate_config() {
    echo "ç”Ÿæˆé…ç½®æ–‡ä»¶..."
    # ä»Žæ¨¡æ¿ç”Ÿæˆ.envæ–‡ä»¶
    # ç”Ÿæˆdocker-compose.yml
}

# 4. åˆå§‹åŒ–æ•°æ®åº“
init_database() {
    echo "åˆå§‹åŒ–æ•°æ®åº“..."
    # ç­‰å¾…PostgreSQLå¯åŠ¨
    # æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬
}

# 5. å¯åŠ¨æœåŠ¡
start_services() {
    echo "å¯åŠ¨æœåŠ¡..."
    docker-compose up -d
}

# 6. å¥åº·æ£€æŸ¥
health_check() {
    echo "å¥åº·æ£€æŸ¥..."
    # æ£€æŸ¥æ‰€æœ‰æœåŠ¡çŠ¶æ€
}

# ä¸»æµç¨‹
main() {
    check_environment
    import_images
    generate_config
    init_database
    start_services
    health_check
    echo "å®‰è£…å®Œæˆï¼"
}

main
```

---

### 3. é…ç½®ç®¡ç†å·¥å…·

#### setup-env.shåŠŸèƒ½
```bash
#!/bin/bash
# çŽ¯å¢ƒé…ç½®ç”Ÿæˆå·¥å…·

# äº¤äº’å¼é…ç½®ç”Ÿæˆ
generate_env() {
    read -p "æ•°æ®åº“å¯†ç : " db_password
    read -p "JWTå¯†é’¥: " jwt_secret
    read -p "åŸŸå: " domain
    
    cat > .env <<EOF
POSTGRES_PASSWORD=${db_password}
JWT_SECRET=${jwt_secret}
DOMAIN=${domain}
ENVIRONMENT=production
EOF
}
```

---

## ðŸ“Š å¯¹æ¯”åˆ†æž

### btcloud vs GoZervi

| ç‰¹æ€§ | btcloud | GoZerviï¼ˆè®¡åˆ’ï¼‰ |
|------|---------|----------------|
| **éƒ¨ç½²æ–¹å¼** | PHP Webåº”ç”¨ | Dockerå®¹å™¨åŒ– |
| **èµ„æºç®¡ç†** | æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨ | Dockeré•œåƒ + æ•°æ®å· |
| **å®‰è£…è„šæœ¬** | Shellè„šæœ¬ | Shell + Docker Compose |
| **é…ç½®ç®¡ç†** | æ•°æ®åº“é…ç½® | çŽ¯å¢ƒå˜é‡ + é…ç½®æ–‡ä»¶ |
| **æ›´æ–°æœºåˆ¶** | å®šæ—¶åŒæ­¥ | é•œåƒæ›´æ–° + æ•°æ®è¿ç§» |
| **ç›‘æŽ§** | åŸºç¡€æ—¥å¿— | Prometheus + Grafana |
| **æ‰©å±•æ€§** | å•æœºéƒ¨ç½² | æ”¯æŒé›†ç¾¤éƒ¨ç½² |

---

## ðŸŽ¯ å®žæ–½å»ºè®®

### ä¼˜å…ˆçº§æŽ’åº

#### ðŸ”´ é«˜ä¼˜å…ˆçº§ï¼ˆç«‹å³å®žæ–½ï¼‰
1. **Docker Composeç¼–æŽ’**: å®Œæ•´æœåŠ¡ç¼–æŽ’
2. **ä¸€é”®å®‰è£…è„šæœ¬**: è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹
3. **é…ç½®ç®¡ç†å·¥å…·**: çŽ¯å¢ƒé…ç½®ç”Ÿæˆ

#### ðŸŸ¡ ä¸­ä¼˜å…ˆçº§ï¼ˆçŸ­æœŸå®žæ–½ï¼‰
4. **é•œåƒæœ¬åœ°åŒ–**: æœ¬åœ°é•œåƒä»“åº“
5. **å¥åº·æ£€æŸ¥**: æœåŠ¡çŠ¶æ€ç›‘æŽ§
6. **å¤‡ä»½æ¢å¤**: æ•°æ®å¤‡ä»½å·¥å…·

#### ðŸŸ¢ ä½Žä¼˜å…ˆçº§ï¼ˆé•¿æœŸä¼˜åŒ–ï¼‰
7. **ç›‘æŽ§é¢æ¿**: Prometheus + Grafana
8. **æ—¥å¿—èšåˆ**: ELK/Lokié›†æˆ
9. **é›†ç¾¤æ”¯æŒ**: Kubernetesç¼–æŽ’

---

## ðŸ’¡ å…³é”®è®¾è®¡ç‚¹

### 1. å®Œå…¨ç¦»çº¿éƒ¨ç½²
- âœ… æ‰€æœ‰Dockeré•œåƒæœ¬åœ°å­˜å‚¨
- âœ… æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬æœ¬åœ°åŒ–
- âœ… é…ç½®æ–‡ä»¶æ¨¡æ¿åŒ–
- âœ… ä¸ä¾èµ–å¤–éƒ¨æœåŠ¡

### 2. ä¸€é”®å®‰è£…
- âœ… è‡ªåŠ¨åŒ–çŽ¯å¢ƒæ£€æŸ¥
- âœ… è‡ªåŠ¨åŒ–é•œåƒå¯¼å…¥
- âœ… è‡ªåŠ¨åŒ–é…ç½®ç”Ÿæˆ
- âœ… è‡ªåŠ¨åŒ–æœåŠ¡å¯åŠ¨

### 3. å¯æ‰©å±•æ€§
- âœ… æ”¯æŒå•æœºéƒ¨ç½²
- âœ… æ”¯æŒé›†ç¾¤éƒ¨ç½²ï¼ˆæœªæ¥ï¼‰
- âœ… æ”¯æŒå¤šçŽ¯å¢ƒé…ç½®
- âœ… æ”¯æŒç‰ˆæœ¬å‡çº§

---

## ðŸ“ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³å¼€å§‹
1. **åˆ›å»ºDocker Composeæ–‡ä»¶**: å®Œæ•´æœåŠ¡ç¼–æŽ’
2. **å¼€å‘å®‰è£…è„šæœ¬**: ä¸€é”®å®‰è£…å·¥å…·
3. **é…ç½®ç®¡ç†å·¥å…·**: çŽ¯å¢ƒé…ç½®ç”Ÿæˆ

### æµ‹è¯•éªŒè¯
4. **æœ¬åœ°æµ‹è¯•**: å®Œæ•´éƒ¨ç½²æµç¨‹æµ‹è¯•
5. **æ–‡æ¡£ç¼–å†™**: éƒ¨ç½²æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—
6. **ä¼˜åŒ–æ”¹è¿›**: æ ¹æ®æµ‹è¯•ç»“æžœä¼˜åŒ–

---

**åˆ†æžå®Œæˆæ—¶é—´**: 2025-01-XX  
**å‚è€ƒé¡¹ç›®**: btcloud-main  
**ç›®æ ‡é¡¹ç›®**: GoZervi SaaSç³»ç»Ÿ  
**å»ºè®®**: ä¼˜å…ˆå®žæ–½Docker Composeç¼–æŽ’å’Œä¸€é”®å®‰è£…è„šæœ¬




