# Xiaomi Milocoéšç§ä¿æŠ¤å®ç°åˆ†ææŠ¥å‘Š

## ğŸ“Š åˆ†ææ¦‚è§ˆ

**åˆ†ææ—¶é—´**: 2025-01-XX  
**å‚è€ƒé¡¹ç›®**: Xiaomi Miloco (`xiaomi-miloco-main`)  
**åˆ†æç›®æ ‡**: å­¦ä¹ éšç§ä¿æŠ¤å®ç°ï¼Œåº”ç”¨åˆ°GoZerviæ™ºèƒ½åŒ–SaaSé¡¹ç›®

---

## ğŸ” æ ¸å¿ƒéšç§ä¿æŠ¤æœºåˆ¶

### 1. æœ¬åœ°LLMæ¨¡å‹ï¼ˆç«¯ä¾§è®¡ç®—ï¼‰âœ…

**å®ç°æ–¹å¼**:
- ä½¿ç”¨**ç«¯ä¾§å¤§æ¨¡å‹**ï¼ˆOn-Device LLMï¼‰
- æ‰€æœ‰AIæ¨ç†åœ¨æœ¬åœ°è®¾å¤‡å®Œæˆ
- æ•°æ®ä¸ç¦»å¼€æœ¬åœ°è®¾å¤‡ï¼Œä¸ä¸Šä¼ åˆ°äº‘ç«¯

**å…³é”®ä»£ç **:
```python
# READMEä¸­æåˆ°ï¼š
# "On-Device LLM: æä¾›å°ç±³è‡ªç ”ç«¯ä¾§æ¨¡å‹ï¼Œå®ç°ç«¯ä¾§è§†é¢‘ç†è§£ï¼Œä¿éšœå®¶åº­éšç§å®‰å…¨"
```

**ä¼˜åŠ¿**:
- âœ… **æ•°æ®ä¸å‡ºæœ¬åœ°**ï¼šæ•æ„Ÿæ•°æ®ï¼ˆå¦‚æ‘„åƒå¤´è§†é¢‘ï¼‰ä¸ç¦»å¼€è®¾å¤‡
- âœ… **éšç§ä¿æŠ¤**ï¼šé¿å…æ•°æ®æ³„éœ²é£é™©
- âœ… **ä½å»¶è¿Ÿ**ï¼šæœ¬åœ°æ¨ç†ï¼Œæ— éœ€ç½‘ç»œä¼ è¾“
- âœ… **æˆæœ¬æ§åˆ¶**ï¼šæ— éœ€è°ƒç”¨äº‘ç«¯APIï¼Œé™ä½æˆæœ¬

**åº”ç”¨åˆ°GoZervi**:
- ğŸ¯ **å»ºè®®**: å¯¹äºæ•æ„Ÿæ•°æ®å¤„ç†ï¼Œä¼˜å…ˆä½¿ç”¨æœ¬åœ°æ¨¡å‹
- ğŸ¯ **å»ºè®®**: æä¾›æœ¬åœ°æ¨¡å‹é€‰é¡¹ï¼Œè®©ç”¨æˆ·é€‰æ‹©æ˜¯å¦ä½¿ç”¨äº‘ç«¯AI
- ğŸ¯ **å»ºè®®**: å¯¹äºéæ•æ„Ÿæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨äº‘ç«¯AIæå‡èƒ½åŠ›

---

### 2. æ•°æ®å­˜å‚¨åŠ å¯†ï¼ˆSHA256å“ˆå¸Œæ ¡éªŒï¼‰âœ…

**å®ç°æ–¹å¼**:
- ä½¿ç”¨**SHA256å“ˆå¸Œ**æ ¡éªŒæ•°æ®å®Œæ•´æ€§
- å­˜å‚¨æ—¶é™„åŠ å“ˆå¸Œå€¼ï¼Œè¯»å–æ—¶éªŒè¯å“ˆå¸Œ

**å…³é”®ä»£ç ** (`miot_kit/miot/storage.py`):
```python
def __save(self, full_path: str, data: Union[bytes, str, Dict, List, None], 
           cover: bool = True, with_hash: bool = True) -> bool:
    # ... æ•°æ®åºåˆ—åŒ– ...
    with open(full_path, "wb") as w_file:
        w_file.write(w_bytes)
        if with_hash:
            # é™„åŠ SHA256å“ˆå¸Œå€¼
            w_file.write(hashlib.sha256(w_bytes).digest())

def __load(self, full_path: str, type_: type = bytes, 
           with_hash_check: bool = True):
    # ... è¯»å–æ•°æ® ...
    if with_hash_check:
        if len(r_data) <= 32:
            return None
        data_bytes = r_data[:-32]  # æ•°æ®éƒ¨åˆ†
        hash_value = r_data[-32:]   # å“ˆå¸Œéƒ¨åˆ†
        # éªŒè¯å“ˆå¸Œ
        if hashlib.sha256(data_bytes).digest() != hash_value:
            _LOGGER.error("load error, hash check failed")
            return None
```

**ä¼˜åŠ¿**:
- âœ… **æ•°æ®å®Œæ•´æ€§**ï¼šé˜²æ­¢æ•°æ®è¢«ç¯¡æ”¹
- âœ… **é”™è¯¯æ£€æµ‹**ï¼šåŠæ—¶å‘ç°æ•°æ®æŸå
- âœ… **å®‰å…¨æ€§**ï¼šç¡®ä¿å­˜å‚¨æ•°æ®æœªè¢«ä¿®æ”¹

**åº”ç”¨åˆ°GoZervi**:
- ğŸ¯ **å»ºè®®**: å¯¹æ•æ„Ÿæ•°æ®ï¼ˆå¦‚ç”¨æˆ·å‡­è¯ã€é…ç½®ä¿¡æ¯ï¼‰ä½¿ç”¨å“ˆå¸Œæ ¡éªŒ
- ğŸ¯ **å»ºè®®**: å®ç°æ•°æ®å®Œæ•´æ€§æ£€æŸ¥æœºåˆ¶
- ğŸ¯ **å»ºè®®**: è€ƒè™‘ä½¿ç”¨æ›´å¼ºçš„åŠ å¯†ç®—æ³•ï¼ˆå¦‚AESï¼‰åŠ å¯†æ•æ„Ÿæ•°æ®

---

### 3. è®¤è¯æœºåˆ¶ï¼ˆJWT + Cookieå®‰å…¨è®¾ç½®ï¼‰âœ…

**å®ç°æ–¹å¼**:
- JWT Tokenè®¤è¯
- Cookieå®‰å…¨è®¾ç½®ï¼ˆhttponly, samesiteï¼‰
- Tokenå…¨å±€å¤±æ•ˆæœºåˆ¶

**å…³é”®ä»£ç ** (`miloco_server/middleware/auth_middleware.py`):
```python
def set_auth_cookie(response: Response, access_token: str) -> None:
    response.set_cookie(
        key="access_token",
        value=access_token,
        max_age=JWT_CONFIG["access_token_expire_minutes"] * 60,
        httponly=True,      # é˜²æ­¢XSSæ”»å‡»
        secure=False,       # å¼€å‘ç¯å¢ƒFalseï¼Œç”Ÿäº§ç¯å¢ƒTrue
        samesite="lax"      # CSRFä¿æŠ¤
    )

# å…¨å±€Tokenå¤±æ•ˆæœºåˆ¶
token_invalidation_time = int(time.time())

def invalidate_all_tokens():
    """ä½¿æ‰€æœ‰JWT Tokenå¤±æ•ˆ"""
    global token_invalidation_time
    token_invalidation_time = int(time.time())

def is_token_valid(token_issued_at: int) -> bool:
    """æ£€æŸ¥Tokenæ˜¯å¦æœ‰æ•ˆ"""
    return token_issued_at > token_invalidation_time
```

**ä¼˜åŠ¿**:
- âœ… **XSSé˜²æŠ¤**ï¼šhttponlyé˜²æ­¢JavaScriptè®¿é—®Cookie
- âœ… **CSRFé˜²æŠ¤**ï¼šsamesiteé˜²æ­¢è·¨ç«™è¯·æ±‚ä¼ªé€ 
- âœ… **Tokenå¤±æ•ˆ**ï¼šå…¨å±€å¤±æ•ˆæœºåˆ¶ï¼Œæ”¯æŒå¼ºåˆ¶ç™»å‡º
- âœ… **å®‰å…¨æ€§**ï¼šç”Ÿäº§ç¯å¢ƒä½¿ç”¨secure=Trueï¼ˆHTTPSï¼‰

**åº”ç”¨åˆ°GoZervi**:
- ğŸ¯ **å»ºè®®**: æ£€æŸ¥å½“å‰JWTå®ç°æ˜¯å¦åŒ…å«httponlyå’Œsamesiteè®¾ç½®
- ğŸ¯ **å»ºè®®**: å®ç°å…¨å±€Tokenå¤±æ•ˆæœºåˆ¶ï¼ˆæ”¯æŒå¼ºåˆ¶ç™»å‡ºï¼‰
- ğŸ¯ **å»ºè®®**: ç”Ÿäº§ç¯å¢ƒä½¿ç”¨secure=Trueï¼ˆHTTPSï¼‰

---

### 4. æ•°æ®éš”ç¦»ï¼ˆDomainæœºåˆ¶ï¼‰âœ…

**å®ç°æ–¹å¼**:
- é€šè¿‡**domain**æœºåˆ¶è¿›è¡Œæ•°æ®éš”ç¦»
- æ¯ä¸ªdomainæœ‰ç‹¬ç«‹çš„å­˜å‚¨ç©ºé—´
- æ”¯æŒdomainçº§åˆ«çš„æ•°æ®åˆ é™¤

**å…³é”®ä»£ç ** (`miot_kit/miot/storage.py`):
```python
def __get_full_path(self, domain: str, name: str, suffix: str) -> str:
    """æ ¹æ®domainå’Œnameç”Ÿæˆå®Œæ•´è·¯å¾„"""
    return os.path.join(self._root_path, domain, f"{name}.{suffix}")

def remove_domain(self, domain: str) -> bool:
    """åˆ é™¤æ•´ä¸ªdomainçš„æ•°æ®"""
    full_path = os.path.join(self._root_path, domain)
    shutil.rmtree(full_path)
    return True
```

**ä¼˜åŠ¿**:
- âœ… **æ•°æ®éš”ç¦»**ï¼šä¸åŒdomainçš„æ•°æ®å®Œå…¨éš”ç¦»
- âœ… **æ˜“äºç®¡ç†**ï¼šæ”¯æŒdomainçº§åˆ«çš„æ•°æ®æ¸…ç†
- âœ… **å®‰å…¨æ€§**ï¼šé˜²æ­¢æ•°æ®æ³„éœ²åˆ°å…¶ä»–domain

**åº”ç”¨åˆ°GoZervi**:
- ğŸ¯ **å»ºè®®**: ç»“åˆå¤šç§Ÿæˆ·æœºåˆ¶ï¼Œä½¿ç”¨domain/tenant_idè¿›è¡Œæ•°æ®éš”ç¦»
- ğŸ¯ **å»ºè®®**: å®ç°ç§Ÿæˆ·çº§åˆ«çš„æ•°æ®æ¸…ç†åŠŸèƒ½
- ğŸ¯ **å»ºè®®**: ç¡®ä¿æ‰€æœ‰æ•°æ®è®¿é—®éƒ½ç»è¿‡ç§Ÿæˆ·è¿‡æ»¤

---

### 5. æœ¬åœ°å­˜å‚¨ä¼˜å…ˆï¼ˆä¸ä¾èµ–äº‘ç«¯ï¼‰âœ…

**å®ç°æ–¹å¼**:
- æ‰€æœ‰é…ç½®å’Œæ•°æ®å­˜å‚¨åœ¨æœ¬åœ°
- ä½¿ç”¨SQLiteä½œä¸ºæœ¬åœ°æ•°æ®åº“
- ä¸å¼ºåˆ¶ä¾èµ–äº‘ç«¯æœåŠ¡

**å…³é”®ä»£ç ** (`miloco_server/dao/kv_dao.py`):
```python
class KVDao:
    """Key-valueæ•°æ®è®¿é—®å¯¹è±¡"""
    def __init__(self):
        self.db_connector = get_db_connector()  # SQLiteè¿æ¥
        self.cache = self.get_all_as_dict()     # æœ¬åœ°ç¼“å­˜
```

**ä¼˜åŠ¿**:
- âœ… **æ•°æ®æ§åˆ¶**ï¼šç”¨æˆ·å®Œå…¨æ§åˆ¶è‡ªå·±çš„æ•°æ®
- âœ… **éšç§ä¿æŠ¤**ï¼šæ•°æ®ä¸ç¦»å¼€æœ¬åœ°
- âœ… **ç¦»çº¿å¯ç”¨**ï¼šä¸ä¾èµ–ç½‘ç»œè¿æ¥

**åº”ç”¨åˆ°GoZervi**:
- ğŸ¯ **å»ºè®®**: å¯¹äºSaaSç³»ç»Ÿï¼Œæä¾›æ•°æ®å¯¼å‡ºåŠŸèƒ½
- ğŸ¯ **å»ºè®®**: æ”¯æŒç”¨æˆ·é€‰æ‹©æ•°æ®å­˜å‚¨ä½ç½®ï¼ˆæœ¬åœ°/äº‘ç«¯ï¼‰
- ğŸ¯ **å»ºè®®**: å®ç°æ•°æ®åŠ å¯†å­˜å‚¨ï¼ˆæ•æ„Ÿæ•°æ®ï¼‰

---

## ğŸ“‹ éšç§ä¿æŠ¤æœ€ä½³å®è·µæ€»ç»“

### 1. æ•°æ®åŠ å¯†

| ä¿æŠ¤æªæ–½ | Milocoå®ç° | GoZerviå»ºè®® |
|---------|-----------|------------|
| **å­˜å‚¨åŠ å¯†** | SHA256å“ˆå¸Œæ ¡éªŒ | âœ… å·²å®ç°ï¼ˆå¯å¢å¼ºï¼‰ |
| **ä¼ è¾“åŠ å¯†** | HTTPSï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰ | âœ… å»ºè®®å®ç° |
| **æ•æ„Ÿæ•°æ®åŠ å¯†** | æœªå‘ç° | ğŸ¯ **å»ºè®®å®ç°AESåŠ å¯†** |

### 2. è®¤è¯æˆæƒ

| ä¿æŠ¤æªæ–½ | Milocoå®ç° | GoZerviå»ºè®® |
|---------|-----------|------------|
| **JWT Token** | âœ… å·²å®ç° | âœ… å·²å®ç° |
| **Cookieå®‰å…¨** | httponly + samesite | ğŸ¯ **å»ºè®®æ£€æŸ¥å¹¶å®ç°** |
| **Tokenå¤±æ•ˆ** | å…¨å±€å¤±æ•ˆæœºåˆ¶ | ğŸ¯ **å»ºè®®å®ç°** |
| **å¯†ç å­˜å‚¨** | æ˜æ–‡å­˜å‚¨ï¼ˆéœ€æ”¹è¿›ï¼‰ | ğŸ¯ **å»ºè®®ä½¿ç”¨bcrypt** |

### 3. æ•°æ®éš”ç¦»

| ä¿æŠ¤æªæ–½ | Milocoå®ç° | GoZerviå»ºè®® |
|---------|-----------|------------|
| **Domainéš”ç¦»** | âœ… å·²å®ç° | âœ… å·²å®ç°ï¼ˆtenant_idï¼‰ |
| **æ•°æ®è®¿é—®æ§åˆ¶** | åŸºäºdomain | âœ… å·²å®ç°ï¼ˆç§Ÿæˆ·è¿‡æ»¤ï¼‰ |
| **æ•°æ®æ¸…ç†** | domainçº§åˆ«åˆ é™¤ | ğŸ¯ **å»ºè®®å®ç°ç§Ÿæˆ·æ•°æ®æ¸…ç†** |

### 4. æœ¬åœ°è®¡ç®—

| ä¿æŠ¤æªæ–½ | Milocoå®ç° | GoZerviå»ºè®® |
|---------|-----------|------------|
| **ç«¯ä¾§LLM** | âœ… å·²å®ç° | ğŸ¯ **å»ºè®®æä¾›æœ¬åœ°æ¨¡å‹é€‰é¡¹** |
| **æœ¬åœ°å­˜å‚¨** | âœ… å·²å®ç° | âœ… å·²å®ç°ï¼ˆPostgreSQLï¼‰ |
| **æ•°æ®ä¸å‡ºæœ¬åœ°** | âœ… å·²å®ç° | ğŸ¯ **å»ºè®®æ•æ„Ÿæ•°æ®æœ¬åœ°å¤„ç†** |

---

## ğŸ¯ GoZerviéšç§ä¿æŠ¤æ”¹è¿›å»ºè®®

### é«˜ä¼˜å…ˆçº§ï¼ˆç«‹å³å®æ–½ï¼‰ğŸ”´

#### 1. Cookieå®‰å…¨è®¾ç½®

**å½“å‰çŠ¶æ€**: âš ï¸ éœ€æ£€æŸ¥

**å»ºè®®å®ç°**:
```go
// åœ¨GoZerviä¸­å®ç°å®‰å…¨çš„Cookieè®¾ç½®
func SetAuthCookie(c *gin.Context, token string) {
    c.SetCookie(
        "access_token",
        token,
        maxAge,
        "/",
        "",
        true,  // secure: ç”Ÿäº§ç¯å¢ƒä½¿ç”¨HTTPS
        true,  // httponly: é˜²æ­¢XSSæ”»å‡»
        http.SameSiteLaxMode, // CSRFä¿æŠ¤
    )
}
```

#### 2. Tokenå…¨å±€å¤±æ•ˆæœºåˆ¶

**å½“å‰çŠ¶æ€**: âš ï¸ æœªå®ç°

**å»ºè®®å®ç°**:
```go
// å®ç°å…¨å±€Tokenå¤±æ•ˆæœºåˆ¶
var tokenInvalidationTime int64

func InvalidateAllTokens() {
    tokenInvalidationTime = time.Now().Unix()
}

func IsTokenValid(issuedAt int64) bool {
    return issuedAt > tokenInvalidationTime
}
```

#### 3. æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨

**å½“å‰çŠ¶æ€**: âš ï¸ æœªå®ç°

**å»ºè®®å®ç°**:
```go
// ä½¿ç”¨AESåŠ å¯†æ•æ„Ÿæ•°æ®
func EncryptSensitiveData(data []byte, key []byte) ([]byte, error) {
    // AES-256-GCMåŠ å¯†
    // ...
}

func DecryptSensitiveData(encryptedData []byte, key []byte) ([]byte, error) {
    // AES-256-GCMè§£å¯†
    // ...
}
```

---

### ä¸­ä¼˜å…ˆçº§ï¼ˆçŸ­æœŸå®æ–½ï¼‰ğŸŸ¡

#### 4. æ•°æ®å®Œæ•´æ€§æ ¡éªŒ

**å»ºè®®å®ç°**:
```go
// ä½¿ç”¨SHA256å“ˆå¸Œæ ¡éªŒæ•°æ®å®Œæ•´æ€§
func SaveWithHash(data []byte) []byte {
    hash := sha256.Sum256(data)
    return append(data, hash[:]...)
}

func LoadWithHash(data []byte) ([]byte, error) {
    if len(data) <= 32 {
        return nil, errors.New("invalid data")
    }
    content := data[:len(data)-32]
    hash := data[len(data)-32:]
    
    expectedHash := sha256.Sum256(content)
    if !bytes.Equal(hash, expectedHash[:]) {
        return nil, errors.New("hash check failed")
    }
    return content, nil
}
```

#### 5. ç§Ÿæˆ·æ•°æ®æ¸…ç†åŠŸèƒ½

**å»ºè®®å®ç°**:
```go
// å®ç°ç§Ÿæˆ·çº§åˆ«çš„æ•°æ®æ¸…ç†
func (s *TenantService) DeleteTenantData(ctx context.Context, tenantID int64) error {
    // 1. åˆ é™¤æ‰€æœ‰ä¸šåŠ¡æ•°æ®
    // 2. åˆ é™¤ç”¨æˆ·-ç§Ÿæˆ·å…³è”
    // 3. åˆ é™¤ç§Ÿæˆ·é…ç½®
    // 4. è®°å½•å®¡è®¡æ—¥å¿—
    return nil
}
```

#### 6. æœ¬åœ°æ¨¡å‹é€‰é¡¹

**å»ºè®®å®ç°**:
- æä¾›æœ¬åœ°LLMæ¨¡å‹é€‰é¡¹ï¼ˆå¦‚Ollamaï¼‰
- å…è®¸ç”¨æˆ·é€‰æ‹©ä½¿ç”¨æœ¬åœ°æˆ–äº‘ç«¯AI
- æ•æ„Ÿæ•°æ®å¤„ç†ä¼˜å…ˆä½¿ç”¨æœ¬åœ°æ¨¡å‹

---

### ä½ä¼˜å…ˆçº§ï¼ˆé•¿æœŸä¼˜åŒ–ï¼‰ğŸŸ¢

#### 7. æ•°æ®å¯¼å‡ºåŠŸèƒ½

**å»ºè®®å®ç°**:
- æ”¯æŒç”¨æˆ·å¯¼å‡ºè‡ªå·±çš„æ•°æ®
- æ”¯æŒæ•°æ®æ ¼å¼è½¬æ¢ï¼ˆJSON/CSVï¼‰
- æ”¯æŒæ•°æ®åŠ å¯†å¯¼å‡º

#### 8. å®¡è®¡æ—¥å¿—

**å»ºè®®å®ç°**:
- è®°å½•æ‰€æœ‰æ•æ„Ÿæ“ä½œ
- è®°å½•æ•°æ®è®¿é—®æ—¥å¿—
- æ”¯æŒå®¡è®¡æ—¥å¿—æŸ¥è¯¢å’Œå¯¼å‡º

---

## ğŸ“Š éšç§ä¿æŠ¤èƒ½åŠ›å¯¹æ¯”

| éšç§ä¿æŠ¤æªæ–½ | Miloco | GoZerviå½“å‰ | GoZerviç›®æ ‡ |
|------------|--------|------------|------------|
| **æœ¬åœ°LLM** | âœ… | âš ï¸ MockæœåŠ¡ | ğŸ¯ æä¾›æœ¬åœ°é€‰é¡¹ |
| **æ•°æ®åŠ å¯†å­˜å‚¨** | âœ… SHA256 | âš ï¸ æœªå®ç° | ğŸ¯ AESåŠ å¯† |
| **æ•°æ®å®Œæ•´æ€§æ ¡éªŒ** | âœ… | âš ï¸ æœªå®ç° | ğŸ¯ SHA256æ ¡éªŒ |
| **Cookieå®‰å…¨** | âœ… | âš ï¸ éœ€æ£€æŸ¥ | ğŸ¯ å®ç° |
| **Tokenå¤±æ•ˆæœºåˆ¶** | âœ… | âš ï¸ æœªå®ç° | ğŸ¯ å®ç° |
| **æ•°æ®éš”ç¦»** | âœ… Domain | âœ… Tenant | âœ… å®Œå–„ |
| **æœ¬åœ°å­˜å‚¨ä¼˜å…ˆ** | âœ… | âœ… PostgreSQL | âœ… ä¿æŒ |
| **å¯†ç åŠ å¯†** | âŒ æ˜æ–‡ | âš ï¸ éœ€æ£€æŸ¥ | ğŸ¯ bcrypt |

---

## ğŸ’¡ å…³é”®å­¦ä¹ ç‚¹

### 1. ç«¯ä¾§è®¡ç®—çš„é‡è¦æ€§

**Milocoçš„æ ¸å¿ƒä¼˜åŠ¿**:
- ä½¿ç”¨ç«¯ä¾§LLMï¼Œæ•°æ®ä¸å‡ºæœ¬åœ°
- ä¿éšœå®¶åº­éšç§å®‰å…¨
- é™ä½äº‘ç«¯APIæˆæœ¬

**GoZerviåº”ç”¨**:
- å¯¹äºæ•æ„Ÿæ•°æ®å¤„ç†ï¼Œä¼˜å…ˆä½¿ç”¨æœ¬åœ°æ¨¡å‹
- æä¾›æœ¬åœ°/äº‘ç«¯AIé€‰æ‹©
- é™ä½éšç§æ³„éœ²é£é™©

### 2. æ•°æ®å®Œæ•´æ€§ä¿æŠ¤

**Milocoçš„å®ç°**:
- SHA256å“ˆå¸Œæ ¡éªŒ
- é˜²æ­¢æ•°æ®ç¯¡æ”¹
- åŠæ—¶å‘ç°æ•°æ®æŸå

**GoZerviåº”ç”¨**:
- å¯¹æ•æ„Ÿæ•°æ®ä½¿ç”¨å“ˆå¸Œæ ¡éªŒ
- å®ç°æ•°æ®å®Œæ•´æ€§æ£€æŸ¥
- æå‡æ•°æ®å®‰å…¨æ€§

### 3. è®¤è¯å®‰å…¨æœºåˆ¶

**Milocoçš„å®ç°**:
- Cookieå®‰å…¨è®¾ç½®ï¼ˆhttponly, samesiteï¼‰
- å…¨å±€Tokenå¤±æ•ˆæœºåˆ¶
- é˜²æ­¢XSSå’ŒCSRFæ”»å‡»

**GoZerviåº”ç”¨**:
- æ£€æŸ¥å¹¶å®ç°Cookieå®‰å…¨è®¾ç½®
- å®ç°Tokenå¤±æ•ˆæœºåˆ¶
- æå‡è®¤è¯å®‰å…¨æ€§

### 4. æ•°æ®éš”ç¦»æœºåˆ¶

**Milocoçš„å®ç°**:
- Domainæœºåˆ¶éš”ç¦»æ•°æ®
- æ”¯æŒdomainçº§åˆ«æ¸…ç†
- é˜²æ­¢æ•°æ®æ³„éœ²

**GoZerviåº”ç”¨**:
- ç»“åˆå¤šç§Ÿæˆ·æœºåˆ¶
- å®ç°ç§Ÿæˆ·æ•°æ®æ¸…ç†
- ç¡®ä¿æ•°æ®éš”ç¦»å®Œæ•´

---

## ğŸ¯ å®æ–½è·¯çº¿å›¾

### Week 1-2: é«˜ä¼˜å…ˆçº§å®æ–½ ğŸ”´

1. **Cookieå®‰å…¨è®¾ç½®**
   - æ£€æŸ¥å½“å‰å®ç°
   - æ·»åŠ httponlyå’Œsamesite
   - ç”Ÿäº§ç¯å¢ƒä½¿ç”¨secure=True

2. **Tokenå¤±æ•ˆæœºåˆ¶**
   - å®ç°å…¨å±€Tokenå¤±æ•ˆ
   - æ”¯æŒå¼ºåˆ¶ç™»å‡º
   - æ›´æ–°è®¤è¯ä¸­é—´ä»¶

3. **æ•æ„Ÿæ•°æ®åŠ å¯†**
   - å®ç°AESåŠ å¯†
   - åŠ å¯†å­˜å‚¨æ•æ„Ÿé…ç½®
   - æ›´æ–°æ•°æ®è®¿é—®å±‚

### Week 3-4: ä¸­ä¼˜å…ˆçº§å®æ–½ ğŸŸ¡

4. **æ•°æ®å®Œæ•´æ€§æ ¡éªŒ**
   - å®ç°SHA256å“ˆå¸Œæ ¡éªŒ
   - æ›´æ–°å­˜å‚¨å±‚
   - æ·»åŠ æ•°æ®éªŒè¯

5. **ç§Ÿæˆ·æ•°æ®æ¸…ç†**
   - å®ç°ç§Ÿæˆ·æ•°æ®åˆ é™¤
   - æ·»åŠ å®¡è®¡æ—¥å¿—
   - æµ‹è¯•æ•°æ®æ¸…ç†åŠŸèƒ½

6. **æœ¬åœ°æ¨¡å‹é€‰é¡¹**
   - é›†æˆOllamaæˆ–å…¶ä»–æœ¬åœ°LLM
   - æä¾›æœ¬åœ°/äº‘ç«¯é€‰æ‹©
   - æ›´æ–°AIæœåŠ¡

### Week 5-6: ä½ä¼˜å…ˆçº§ä¼˜åŒ– ğŸŸ¢

7. **æ•°æ®å¯¼å‡ºåŠŸèƒ½**
   - å®ç°æ•°æ®å¯¼å‡ºAPI
   - æ”¯æŒå¤šç§æ ¼å¼
   - æ·»åŠ åŠ å¯†å¯¼å‡º

8. **å®¡è®¡æ—¥å¿—**
   - å®ç°å®¡è®¡æ—¥å¿—ç³»ç»Ÿ
   - è®°å½•æ•æ„Ÿæ“ä½œ
   - æ”¯æŒæ—¥å¿—æŸ¥è¯¢

---

## ğŸ“ æ€»ç»“

### âœ… Milocoçš„éšç§ä¿æŠ¤ä¼˜åŠ¿

1. **ç«¯ä¾§è®¡ç®—**ï¼šæ•°æ®ä¸å‡ºæœ¬åœ°ï¼Œä¿éšœéšç§å®‰å…¨
2. **æ•°æ®åŠ å¯†**ï¼šSHA256å“ˆå¸Œæ ¡éªŒï¼Œä¿æŠ¤æ•°æ®å®Œæ•´æ€§
3. **è®¤è¯å®‰å…¨**ï¼šCookieå®‰å…¨è®¾ç½®ï¼Œé˜²æ­¢XSS/CSRF
4. **æ•°æ®éš”ç¦»**ï¼šDomainæœºåˆ¶ï¼Œç¡®ä¿æ•°æ®éš”ç¦»

### ğŸ¯ GoZerviéœ€è¦æ”¹è¿›çš„åœ°æ–¹

1. **Cookieå®‰å…¨**ï¼šéœ€è¦æ£€æŸ¥å¹¶å®ç°å®‰å…¨è®¾ç½®
2. **Tokenå¤±æ•ˆ**ï¼šéœ€è¦å®ç°å…¨å±€å¤±æ•ˆæœºåˆ¶
3. **æ•°æ®åŠ å¯†**ï¼šéœ€è¦å®ç°æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
4. **æ•°æ®å®Œæ•´æ€§**ï¼šéœ€è¦å®ç°å“ˆå¸Œæ ¡éªŒ
5. **æœ¬åœ°æ¨¡å‹**ï¼šéœ€è¦æä¾›æœ¬åœ°LLMé€‰é¡¹

### ğŸ’¡ æ ¸å¿ƒå»ºè®®

1. **ç«‹å³å®æ–½**ï¼šCookieå®‰å…¨è®¾ç½®ã€Tokenå¤±æ•ˆæœºåˆ¶
2. **çŸ­æœŸå®æ–½**ï¼šæ•°æ®åŠ å¯†ã€æ•°æ®å®Œæ•´æ€§æ ¡éªŒ
3. **é•¿æœŸä¼˜åŒ–**ï¼šæœ¬åœ°æ¨¡å‹é€‰é¡¹ã€å®¡è®¡æ—¥å¿—

---

**åˆ†æå®Œæˆæ—¶é—´**: 2025-01-XX  
**å‚è€ƒé¡¹ç›®**: Xiaomi Miloco  
**åº”ç”¨ç›®æ ‡**: GoZerviæ™ºèƒ½åŒ–SaaSé¡¹ç›®

